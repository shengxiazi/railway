/************************************************
**     RsCurve v1.9
**     武汉岩海工程技术有限公司版权所有，未经许可不得使用
**     http://www.rocksea.com.cn
************************************************/(function(U,E){function R(b){var a,d;d=document.documentElement;var c=document.body;a=(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0);d=(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0);b=b||U.event;a+=b.clientX;d+=b.clientY;return{x:a,y:d}}function S(b){for(var a=0,d=0;b;)a+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return{x:a,y:d}}function V(b,a,d){var c;for(c=0;c<d.length;c++)if(b>=d[c][0]&&b<=d[c][2]&&a>=d[c][1]&&a<=d[c][3])return c;return-1}function M(b){var a=0,d=1,c;for(c=0;c<b.length;c++)b[c]>a?(a=b[c],d=1):b[c]<-a&&(a=-b[c],d=-1);return a*d}function K(b){var a=-Number.MAX_VALUE,d;for(d=0;d<b.length;d++)b[d]>a&&(a=b[d]);return a}function Z(b,a){var d;for(d=0;d<b.length;d++)if(b[d]==a)return d;return 0}function O(b,a,d){return b>d?d:b<a?a:b}function ga(b,a){return a-b}function aa(b,a){var d,c;for(c=d=0;c<a;c++)d+=b[c];return d}function W(b){var a;if(!(b<=N[0])){if(b>=N[N.length-1])return P[P.length-1];for(a=1;a<N.length;a++)if(b>=N[a-1]&&b<N[a])return P[a-1]+(b-N[a-1])*(P[a]-P[a-1])/(N[a]-N[a-1])}return P[0]}function ha(b){var a=b.getContext("2d");b.ctx=a;a.a=a.arc;a.bc=a.bezierCurveTo;a.bp=a.beginPath;a.cp=a.closePath;a.cr=a.clearRect;a.crg=a.createRadialGradient;a.f=a.fill;a.ft=a.fillText;a.fr=a.fillRect;a.l=a.lineTo;a.m=a.moveTo;a.r=a.rect;a.re=a.restore;a.s=a.stroke;a.sa=a.save;a.sc=a.scale;a.t=a.translate;a.ddl=function(b,a,f,k,h){var c=this.setLineDash!==E&&h!==E;c&&this.setLineDash(h);this.bp();this.m(b,a);this.l(f,k);this.s();c&&this.setLineDash([])};a.dcH=function(b,a,f,k,h,l,p){var c=this.setLineDash!==E&&p!==E;c&&this.setLineDash(p);this.strokeStyle=l;this.bp();this.m(1.5,b-a[1]*h);for(l=2;l<f-1;l++)this.l(l*k+.5,b-a[l]*h);this.s();c&&this.setLineDash([])};a.dcs=function(b,a,f,k,h,l){var c=this.setLineDash!==E&&l!==E;b=F(b);a=F(a);c&&this.setLineDash(l);this.strokeStyle=h;this.bp();this.m(b,a);this.l(b+F(56*f),a);this.s();c&&this.setLineDash([]);this.fillStyle=h;this.ft(k,b+64*f,a)}}function X(b,a,d,c,f,k){k===E&&(k=3);b.sa();b.fillStyle="#FFF";b.cr(0,0,a,d);b.t(c,f);b.sc(k,k);b.fillStyle="#000";b.bp();b.m(5.8,4.8);b.l(8.2,4.8);b.l(3.9,12.1);b.l(1,12.1);b.l(3.6,7.7);b.bc(4.9,7.4,5.9,6.3,5.8,4.8);b.cp();b.f();b.bp();b.m(11.7,4.8);b.l(14.5,4.8);b.l(10.3,12.1);b.l(7.4,12.1);b.l(8.8,9.8);b.l(6,9.8);b.l(7.6,7.1);b.l(10.3,7.1);b.cp();b.f();b.bp();b.a(3.2,5.1,2.2,0,2*ba);b.cp();a=b.crg(3.2,5.1,.25,3.2,5.1,2.2);a.addColorStop(0,"#FC5");a.addColorStop(1,"#F00");b.fillStyle=a;b.f();b.re()}function Y(b,a){var d="dcCurve_"+b,c=document.getElementById(b);c.innerHTML='\x3ccanvas id\x3d"'+d+'" width\x3d"'+c.clientWidth+'" height\x3d"'+c.clientHeight+'"\x3e\x3c/canvas\x3e';a!==E&&a(b,d);d=document.getElementById(d);ha(d);d.curveType=0;d.hotArea=[];return d}function ia(b,a){var d="dcDlg_"+b,c="ok_"+b,f="cancel_"+b,k=document.getElementById(b),h,l,p,t,m;k.innerHTML+='\x3cdiv class\x3d"rs_pl" title\x3d"\u8bbe\u5b9a\u6869\u957f"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_pv" title\x3d"\u8bbe\u5b9a\u6ce2\u901f"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_filter" title\x3d"\u4f4e\u901a\u6ee4\u6ce2"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_amp" title\x3d"\u6307\u6570\u653e\u5927(\u4f7f\u7528\u9f20\u6807\u6eda\u8f6e)"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_df" title\x3d"\u5b9a\u4e49\u7f3a\u9677\u4f4d\u7f6e"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_mi" title\x3d"\u6ce2\u5f62\u53cd\u5411"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_zo" title\x3d"\u6269\u5c55\u6216\u538b\u7f29\u6ce2\u5f62"\x3e\x3c/div\x3e\x3cdiv class\x3d"rs_reset" title\x3d"\u6062\u590d\u5230\u539f\u59cb\u4fe1\u53f7"\x3e\x3c/div\x3e';k.innerHTML+='\x3cdiv id\x3d"'+d+'" style\x3d"display:none;background-color:#0099CC;position:absolute;width:300px;height:100px;top:36px;left:52px"\x3e\x3cdiv style\x3d"border:1px solid #FFFFFF;width:290px;height:90px;position:absolute;top:4px;left:4px;"\x3e\x3cdiv style\x3d"position:absolute;top:20px;width:140px;height:24px;text-align:right;color:#FFFFFF;line-height:24px;"\x3e\x3c/div\x3e\x3cinput style\x3d"position:absolute;width:56px;height:20px;top:18px;left:148px" type\x3d"text" /\x3e\x3cdiv style\x3d"position:absolute;width:50px;height:24px;left:216px;line-height:24px;color:#FFFFFF;top:20px;"\x3e\x3c/div\x3e\x3cinput id\x3d"'+c+'" style\x3d"position:absolute;width:90px;height:30px;top:54px;left:30px;right:180px;" type\x3d"button" value\x3d"\u786e\u5b9a" /\x3e\x3cinput id\x3d"'+f+'" style\x3d"position:absolute;width:90px;height:30px;top:54px;left:180px;" type\x3d"button" value\x3d"\u53d6\u6d88" /\x3e\x3c/div\x3e\x3c/div\x3e';document.getElementById(d).canvasId=a;document.getElementById(c).dlgId=d;document.getElementById(f).dlgId=d;h=F(25*(k.clientWidth-44)/1024);l=F((k.clientHeight-2*h-336)/7);for(m=0;8>m;m++)p=k.childNodes[m+1],p.id=a+"_"+p.className,p.canvasId=a,p.dlgId=d,p.checked=!1,t=p.style,t.position="absolute",t.padding="0px",t.left="2px",t.top=h+(42+l)*m+"px",t.width="42px",t.height="42px",t.backgroundImage="url("+J[m]+")",t.backgroundRepeat="no-repeat",t.backgroundPosition="center center",p.onmouseenter=function(){this.style.backgroundColor="#FFCC00"},p.onmouseleave=function(){this.style.backgroundColor=this.checked?"#4CD964":""},p.onmousedown=function(){var b=document.getElementById(this.dlgId),a=b.style,b=b.childNodes[0].childNodes,c=document.getElementById(this.canvasId),d=c.data,f;a.display="none";f=this.className;switch(f){case "rs_pl":b[0].innerHTML="\u8bf7\u6307\u5b9a\u6869\u957f:";b[1].value=d.real_pl.toFixed(2);b[2].innerHTML="m";b[3].className=f+"_ok_button";a.top="32px";a.display="";c.dlgId=this.dlgId;break;case "rs_pv":b[0].innerHTML="\u8bf7\u6307\u5b9a\u6ce2\u901f:";b[1].value=d.real_pv.toFixed(0);b[2].innerHTML="m/s";b[3].className=f+"_ok_button";a.top="68px";a.display="";c.dlgId=this.dlgId;break;case "rs_filter":b[0].innerHTML="\u4f4e\u901a\u6ee4\u6ce2\u9891\u7387:";b[1].value=d.filter.toFixed(0);b[2].innerHTML="Hz";b[3].className=f+"_ok_button";a.top="112px";a.display="";c.dlgId=this.dlgId;break;case "rs_amp":this.checked=!this.checked;c.mode=this.checked?4:0;this.style.backgroundColor=this.checked?"#4CD964":"#FFCC00";a=document.getElementById(this.canvasId+"_rs_df");a.checked=!1;a.style.backgroundColor="";break;case "rs_df":this.checked=!this.checked;c.mode=this.checked?3:0;this.style.backgroundColor=this.checked?"#4CD964":"#FFCC00";a=document.getElementById(this.canvasId+"_rs_amp");a.checked=!1;a.style.backgroundColor="";break;case "rs_reset":d.reset(c);break;case "rs_mi":d.isMirror=!d.isMirror;d.drawL(c);break;case "rs_zo":d.isZoom=!d.isZoom,d.drawL(c)}};document.getElementById(c).onclick=function(){var b=document.getElementById(this.dlgId),a=this.className,c=document.getElementById(b.canvasId),d=c.data,f=parseFloat(b.childNodes[0].childNodes[1].value);b.style.display="none";if(NaN!=f&&1E4>f)switch(a){case "rs_pl_ok_button":1<f&&(d.calcByPv=!1,d.real_pv=f*d.real_pv/d.real_pl,d.real_pl=f,a=document.getElementById(b.canvasId+"_rs_pl"),a.checked=!0,a.style.backgroundColor="#4CD964",a=document.getElementById(b.canvasId+"_rs_pv"),a.checked=!1,a.style.backgroundColor="");break;case "rs_pv_ok_button":1<f&&(d.calcByPv=!0,d.real_pl=f*d.real_pl/d.real_pv,d.real_pv=f,a=document.getElementById(b.canvasId+"_rs_pl"),a.checked=!1,a.style.backgroundColor="",a=document.getElementById(b.canvasId+"_rs_pv"),a.checked=!0,a.style.backgroundColor="#4CD964");break;case "rs_filter_ok_button":d.filter=f,a=document.getElementById(b.canvasId+"_rs_filter"),a.checked=.1<f,a.style.backgroundColor=a.checked?"#4CD964":""}d.drawL(c)};document.getElementById(f).onclick=function(){document.getElementById(this.dlgId).style.display="none"}}function L(b){var a=b[0],d,c,f,k,h,l,p,t,m,g;this.bID=a.BasicInfoId;this.pn=a.PileNo;this.pd=a.PileDiameter;this.pl=a.PileLength;this.pv=a.PileVelocity;k=b.length;this.ch=Array(k);for(g=0;g<k;g++){this.ch[g]={};d=this.ch[g];d.id=b[g].Id;d.st=b[g].SampleTime;d.si=b[g].SampleInterval;d.sType=b[g].SignalType;c=b[g].ChannelData;f=c.length;d.data=Array(f);a:{h=c;l=I(M(h));for(p=0;p<h.length;p++){if(2*h[p]>l){h=!1;break a}if(-2*h[p]>l){h=!0;break a}}h=!1}if(h)for(h=0;h<f;h++)d.data[h]=-c[h];else for(h=0;h<f;h++)d.data[h]=c[h];d.sMaxAbs=I(M(d.data));d.sMax=K(d.data)}if(this.isHS=a.IsHighStrainTest){if(this.isEditEnable=!1,this.pv=a.Vs,f=this.ch[0].data.length,!(4!=k||14>f)){for(g=l=h=0;g<k&&this.ch[g].data.length==f;g++)3==this.ch[g].sType?l++:2>this.ch[g].sType&&h++;if(2==h&&2==l){p=!1;for(g=0;g<k;g++)if(100<b[g].SensorSensitive){p=!0;break}this.v=[];this.e=[];for(g=h=l=0;g<k;g++){d=this.ch[g];t=0;for(c=f-14;c<f-4;c++)t+=d.data[c];t/=10*f;if(3==d.sType){m=p?2E3*b[g].SensorSensitive/(65535*b[g].SampleGain):2E4/(32768*b[g].SampleGain*b[g].SensorSensitive);this.e[l]=Array(f);for(c=0;c<f;c++)this.e[l][c]=(d.data[c]-c*t)*m;l++}else{m=p?20*9.81*b[g].SensorSensitive/(65535*b[g].SampleGain)*(b[g].SampleInterval/1E6):5E4/(32768*b[g].SampleGain*b[g].SensorSensitive)*(b[g].SampleInterval/1E6);this.v[h]=Array(f);for(c=0;c<f;c++)this.v[h][c]=(d.data[c]-c*t)*m;h++}}b=a.SectionArea*a.Density*this.pv/1E3;a=a.SectionArea*a.Density*this.pv*this.pv/1E3/1E6;this.zv=Array(f);this.f=Array(f);this.wd=Array(f);this.wu=Array(f);for(c=0;c<f;c++)this.zv[c]=(this.v[0][c]+this.v[1][c])*b/2,this.f[c]=(this.e[0][c]+this.e[1][c])*a/2,this.wd[c]=(this.f[c]+this.zv[c])/2,this.wu[c]=(this.f[c]-this.zv[c])/2;this.v1Max=K(this.v[0]);this.v2Max=K(this.v[1]);this.e1Max=K(this.e[0]);this.e2Max=K(this.e[1]);this.zvMax=K(this.zv);this.fMax=K(this.f);this.wdMax=K(this.wd);this.wuMax=K(this.wu);this.zMax=Q(I(M(this.zv)),I(M(this.f)));this.vMax=Q(I(M(this.v[0])),I(M(this.v[1])));this.eMax=Q(I(M(this.e[0])),I(M(this.e[1])))}}}else{this.isEditEnable=!0;this.real_pl=.1<a.ReportPileLength?a.ReportPileLength:this.pl;this.real_pv=.1<a.ReportPileVelocity?a.ReportPileVelocity:this.pv;this.headIndex=.1<a.HeadIndex?a.HeadIndex:0;this.filter=.1<a.ReportFilter?a.ReportFilter:0;this.amp=.01<a.ReportAmp?a.ReportAmp:0;this.ampIndex=.1<a.ReportAmpIndex?a.ReportAmpIndex:0;this.defects=[];if(a.Defects)for(g=0;g<a.Defects.length;g++)this.defects[g]=a.Defects[g];this.isZoom=this.isMirror=this.calcByPv=!1}}function T(b){for(var a=0,d=0,c=0;c<b.Section.length;c++){for(var f=b.Section[c],k=f.PeakTime,h=f.PeakValue,l=f.Depth,p=Array(k.length),t=0;t<p.length;t++)p[t]=.001>k[t]?100:f.TubeDistance/k[t];f.WaveVelocity=p;var t=f,m;a:{m=p;var g,u,e,w,x,G,A,z;g=Array(m.length);for(u=0;u<g.length;u++)g[u]=m[u];g=g.sort(ga);e=g.length;for(w=0;w<e&&!(6>g[w]);w++);for(m=e-1;0<=m&&!(2<g[m]);m--);e=m-w+1;if(2>e)m=g[0];else{m=Array(e);for(u=0;u<e;u++,w++)m[u]=g[w];for(w=!0;1<e;){g=aa(m,e)/e;for(x=u=0;x<e;x++)u+=(m[x]-g)*(m[x]-g);u=ja(u/(e-1));x=g-W(e)*u;G=g+W(e)*u;A=u/g;z=!0;for(u=0;u<e;u++)if(!(m[u]>x&&m[u]<G)){z=!1;break}if(z){m=.015>A?g*(1-.015*W(e)):.045<A?g*(1-.045*W(e)):x;break a}if(w){if(m[e-1]<=x)for(g=m,--e,m=Array(e),u=0;u<e;u++)m[u]=g[u];w=!1}else{if(m[0]>=G)for(g=m,--e,m=Array(e),u=0;u<e;u++)m[u]=g[u+1];w=!0}}m=m[0]}}t.Vc=m;f.Ac=aa(h,h.length)/h.length-6;h=Array(p.length);h[0]=0;for(t=1;t<h.length;t++)h[t]=l[t]<=l[t-1]?0:(k[t]-k[t-1])*(k[t]-k[t-1])/(l[t]-l[t-1]);f.Psd=h;2<=f.Vc&&6>=f.Vc&&(a+=f.Vc,d++)}this.source=b;this.Vc=0<d?a/d:0;this.cY=-1}if(U.$RS===E){var Q=Math.max,ka=Math.min,I=Math.abs,F=Math.round,ba=Math.PI,ca=Math.exp,ja=Math.sqrt,N=[10,11,12,13,14,15,16,17,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,105,110,115,120,125,130,135,140,145,150,160,170,180,190,200,220,240,260,280,300,320,340,360,380,400,420,440,470,500,550,600,650,700,750,800,850,900,950,1E3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2E3],P=[1.28,1.33,1.38,1.43,1.47,1.5,1.53,1.56,1.59,1.64,1.69,1.73,1.77,1.8,1.83,1.86,1.89,1.91,1.94,1.96,1.98,2,2.02,2.04,2.05,2.07,2.09,2.1,2.11,2.13,2.14,2.15,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.26,2.27,2.28,2.29,2.29,2.3,2.31,2.32,2.33,2.34,2.36,2.38,2.39,2.41,2.42,2.43,2.45,2.46,2.47,2.5,2.52,2.54,2.56,2.58,2.61,2.64,2.67,2.69,2.72,2.74,2.76,2.77,2.79,2.81,2.82,2.84,2.86,2.88,2.91,2.94,2.96,2.98,3,3.02,3.04,3.06,3.08,3.09,3.12,3.14,3.17,3.19,3.21,3.23,3.24,3.26,3.28,3.29],J=[],da=new Image,ea=new Image,fa=new Image;J[0]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN1JREFUeNpiYBgFo2DQgKr//8GYzvYwDbS/B9wBLEQEWQCQ9AfiAIY2RkEig/k9kNwAxBuBejaQ7gBkSxkYBMjwGEhPAhhX/f+AzzGMKImDnqCNkXGQpgGQy3BFAdTVRGU1BECNArSQZsERPBugmhLRHEMs+EBsIhwtiAbcAaNgwAE8X+/fv5+uJaGjoyMjSjnw5NEjBiVlZbpYfu/uXcyC6OnjRwx///6liwNePHuK6YAnjx4yfP3+nS4OeP/6FTYHPGL48PkLXRzw5f077FHAAMKjYBSMAjoDgAADACauYnvuVSMCAAAAAElFTkSuQmCC";J[1]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVlJREFUeNpiYBgFo2DQgKr//8GYzvawUMlQASCZAMQgegNDG+MFYrUyUcFyAyB5H4j7gbgeiM8DxRqo6wCID3GJr4f6HOTrBVCZeqBcAHUcUPUfZMF7qE/RQQEQKwDxAyB2BAZ9IpCeAJXrp1YIfIDS8VjkYGKNQMs/wNkQPQrEhAIxDtgIpRNQoqLqfwLc922MC+DiEIfA+P6UO6CNcQM0iAWgiQwW9/VQFQux6IKJCVArFxTC47zq/3wgvR8p7idgcTQoQQoC6UDqOAASCo3wqGBgMIDGcyBS3KPr+UDdcqCNEZS3DaEOAYWIIikFDi5AWkkIsZBiS0fBoAKMMMb+/fv/09NiR0dHRpRE+OTRIwYlZWW6WH7v7l3MXPD08SOGv3//0sUBL549xXTAk0cPGb5+/04XB7x//QqbAx4xfPj8hS4O+PL+HfYoYADhUTAKRgGdAUCAAQBdNXVARZdpDwAAAABJRU5ErkJggg\x3d\x3d";J[2]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYJJREFUeNrsVcF1gzAMhU7QbkA3oBs0G6QbNBMkuXIpXHLuBskGyQZlgzJCNggb0K+HnGeMjUWBXmq9p+fYEfqypG9FUZD/LrHPIM/zBEvC2wr7+k8CANA7lg8NXEkJLfB/uUgAcPyI5Qx9NUDpPNXOPmG7nzUAOCSAIwNRqgvoSaWdy7GF7viTC3QzpSxmADe+KTlcYV8NlOeo+gL6hrOrp5fU5RL8flLnDxZbcvjsAmdnJywvHCg5/mYAl/0ay5dRQhkLBAw5a44L7o1a66cdN7O63EovmT+ArOnQMDrEtaVpKbVrT9NSL23kGciaQRoikNLSF1tLmium7UX2DmSNmIYIYu+gcSp9uGID3ErDe9rbcvRoaJbl9w9R1nRoCMfVQHk6NITt1dNLdxrC1k9DJzjJIe7RkAFc4MvQkEvSo6FWMisN9ZJNn4YtiIiGAJbTcPQ0bPvCSUOAy2g4eRq2GUldD1eYhmEajp+G/iAWmobjA5lpGs6TEfE0DBLkR4ABAJlV9ewhMV2oAAAAAElFTkSuQmCC";J[3]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAelJREFUeNrsVt1RwkAQvjC8GysQKjBW4NEBqcBQAfh6L+ILr44VCBUAFQAVJFYgHZgOzr3kO1xvAgmGzDhjdmbzc0nuu2/3270I0Vpr/928i86mdEBHn1ySX5Gb+1TMvLCZBSgd0fEBQH7BG3MCH52aolOTcwK2LnhKPioDN9atuYCgYGxPHhJ40owGlO7RcUweASzBtbEVmKeXF6HSEsDDLLdCvB5YKv2J++m5fLoloD7YjTGyOMLwjsb2larESY1XUlIbhNiwW9WsGBO5JXm/0mJZvs8rS6WniJz7LCbXKN2KKai80gzghY4T3N2TDxwiARPqL/qAYaX0G/kG4XQjNWE9QCKF1uQB3NFPpzJ4rocIky2d9AxZY1o5Y8ZucX4/3QlNqeV5ih0G0aGv5yCCVYYNua2SnTPGG9a2rBUn7IMlE5MFeyR/LmAoGUBS0CUl65IljSgHjcl7mGxN/pR9PPP6rPH4Wf3nFmPXu8ZzjfE+zh8QtVe+GeUiCRHuAOCCMedKHjvshXMtT4X/uAjzbjUA0DYDn3lz9saCacOmZ82e75j4Aie9F/ofMOXIc2vT871vbJBzG8mRQ6L2dhwiAjcsIjaCW1pECh2JogbUzC/ZzwhNmX7mVX5OmliEdHt/a639OfsSYAAteKk2o4xCOAAAAABJRU5ErkJggg\x3d\x3d";J[4]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPBJREFUeNpiYBgFo4ASUPX/PxhTAJgG2g+jDhh1wBBzQNX/BiAWwCMvAFZDEwdADK4H4v1YHQER2w9WQ4IjGElwAMwCAyC+AMSOQPweKiuIIdfG+IG6DsDuCAOozAVyLCfdAZiOQAYkW06eA7A7gizLyXcAwhEFUN4EciwfBShRsH//fqLqdUdHR7zRRqo5LDCBJ48eMSgpK+PVdO/uXYIGk2oO3AFPHz9i+Pv3L16NL549JegAUs1BCoGHDF+/f8er8f3rVww5aSn/8YcAceZgccAjhg+fv1AlYREy58v7d9ijgAGER8EoGAV0BgABBgA883j+BTJWhQAAAABJRU5ErkJggg\x3d\x3d";J[5]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALJJREFUeNrs1tsJgDAMheEc9+sOuoYDuIbu0AG9IIgotUmaKEIP6IM+/B8IKlHdx0PyTj+P67k16kw0oJMB7BDJeB5QjniM8wB6RDbOB8gRrLgMwEew43JAHiGK6wBphDiuB9wRqnj5NsQOqTP7FsyJ+9bXj25Tn8GvF2Mct8Pnh4QRP7+IQgjda4BLnEoQMIqrETCMqxAwjosRcIiLEHCKsxFwjLMQcI5T6Xuizn2LAAMAd59ftggkl5oAAAAASUVORK5CYII\x3d";J[6]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALxJREFUeNpiYBgFo2AUjALSwX8oJlYcL2AaaN+MOgC7A6r+O1DdJhxmsuBQXg/UMB9INwLxBoY2xg9kWioAJAPA5jEwPADiA+hKGHFoVACS96G8D2BHMDBMBDrkAlJKZ8SSCyDiVf8NgHQ+1HIBqLgiUP8D3A6o+k9MFroANMQArwOq/oMcaUDQpDZGxkGRCAdRFKA6YD+QVMCRCAk7AFcibGN0pCjLUFQUUzFrj9YFw8sBo2AUjIJRABBgAFmRRyhSFifVAAAAAElFTkSuQmCC";J[7]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXRJREFUeNrsVt1xgzAMxr0MkE5QsgHZIN2AbJBOkDzz1L7w2jIB7QRhhGwQNigbhA2IjEmOqLKRzF2aB747+Q5jWb+WFAQTJvwzlBdX0qxgjYDm3U4NVAapOljOh/CvGqdA0mhhO6BtTzCGViQD+gKBdce3gfUTvp/9FUiaGNbcIZhS5K07n7c7qSJlzRjCN9dL+NCC95yDT0zLsXUfQMvWKmPZsturHXeFshCYmP8itxetay/xpXmOQJSwVypJXSHY/RGeqvWAR2OLcK8QbImkGpMrIV8B88771mdWt98K0CGqJArYQhCh72LQl6l6txSrF+K+QQXm6PJSXC1Nwh3GPcM7YOaoZH13RmIvaB5dgm/zqOB6oCSelxSaZ9WjSlqITqjbLRgvwVbEKuBdSHMgQ0kp6Qe4cf3I5wH/UpyjkDm9pxjNaG/p+cU1MU3CxZZZYU0lH38e8GvHF2hvfY8fyXwHEofl9xvJHmIonTDhkXEWYAAs2n1GZ34uRAAAAABJRU5ErkJggg\x3d\x3d";J[8]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPJJREFUeNqsVMENgzAMDIgB2KDdoOm7H5gkWYFR2IBu0A3op/90EzZo7epAFsQpkbBkWXEuF/tiMOYgK3LAn5utKXhyjhP5ULzCtBARgDcd8B1tBoVkJLcizbiWyUqRYEDDYDpkIwV5YAY+jGiRNz8iVNCi3FohqxHvhH9yxPqyEGWQsTnKN0KKd1RsHB6FoNeZWFS10ahQXmcme5D3K+IesO2rKWTnVSUTbg8xfJkYG62d/QMZ0clktxYhabGVFLv8R8KaQJe5En0gUyTinlNqIKudJMvgYSDNeiArLCz6VT9atOLQihcaDYf+Rg6zrwADAIpzgASv0RfRAAAAAElFTkSuQmCC";da.src=J[3];ea.src=J[4];fa.src=J[8];L.prototype.reset=function(b){var a=document,d;this.real_pl=this.pl;this.real_pv=this.pv;this.ampIndex=this.amp=this.filter=this.headIndex=0;this.defects=[];this.isZoom=this.isMirror=this.calcByPv=!1;if(d=a.getElementById(b.id+"_rs_pl"))d.checked=!0,d.style.backgroundColor="#4CD964";if(d=a.getElementById(b.id+"_rs_pv"))d.checked=!1,d.style.backgroundColor="";if(d=a.getElementById(b.id+"_rs_filter"))d.checked=!1,d.style.backgroundColor="";if(d=a.getElementById(b.id+"_rs_amp"))d.checked=!1,d.style.backgroundColor="";if(d=a.getElementById(b.id+"_rs_df"))d.checked=!1,d.style.backgroundColor="";b.mode=0;this.drawL(b)};L.prototype.drawtHumbnail=function(b,a){var d,c,f,k,h,l;a===E&&(a=0);d=this.ch[a].data;c=Y(b);f=c.width;k=c.height-(1-c.height%2);h=f/d.length;l=.45*k/this.ch[a].sMaxAbs;c=c.ctx;c.sa();c.fillStyle="#FFF";c.cr(1,0,f,k);c.lineWidth=1;c.strokeStyle="#888";c.ddl(0,k/2,f,k/2,[2,1]);c.dcH(k/2,d,f/h,h,l,"#00F");c.strokeStyle="#888";c.bp();c.r(.5,.5,f-1,k-1);c.s();c.re()};L.prototype.drawL=function(b){var a=b.ctx,d=b.width-46,c=F(25*d/1024),f=b.height-2*c,k=this.ch[b.curveType],h=k.si,l=k.data,p=l.length,t=2==k.sType,m,g,u,e,w,x,G,A,z,q,D,r;if(this.isShowSource)m=this.pl,g=this.pv,u=Z(l,k.sMax),e=F(2E6*m/g/h)+u,w=[],x=d/p,G=.42*f/Q(k.sMaxAbs,5E3);else{m=this.real_pl;g=this.real_pv;.1>this.headIndex&&(this.headIndex=Z(l,k.sMax));u=this.headIndex;e=F(2E6*m/g/h)+u;w=this.defects;l=Array(p);for(q=0;q<p;q++)l[q]=k.data[q];if(.1<this.filter){x=l;A=2*this.filter*ba*h/1E6;q=Array(x.length);q[0]=A*x[0];for(l=1;l<q.length;l++)q[l]=A*x[l]+(1-A)*q[l-1];l=q}if(.01<this.amp&&this.ampIndex>u)if(x=l,G=this.amp,z=F(this.ampIndex),A=F(e),q=Array(x.length),.1>G||z>=A)l=x;else{for(l=0;l<z;l++)q[l]=x[l];for(l=z;l<A;l++)q[l]=x[l]*ca((l-z)*G/(A-z));G=ca(G);for(l=A;l<q.length;l++)q[l]=x[l]*G;l=q}if(this.isMirror)for(q=0;q<p;q++)l[q]=-l[q];this.isZoom&&(p/=2);x=d/p;G=.42*f/Q(I(M(l)),5E3)}b.ratioX=x;b.head=u*x+46;b.tail=e*x+46;A=F(u*x)+.5;e=F(e*x)+.5;X(a,b.width,b.height,54,c);a.sa();a.fillStyle="#222";a.textBaseline="bottom";a.font=.8*c+"px Calibri";a.textAlign="left";a.ft("\u6869\u53f7\uff1a"+this.pn+"    \u6869\u5f84\uff1a"+this.pd+"    \u6869\u957f\uff1a"+m.toFixed(2)+" m    \u6ce2\u901f\uff1a"+g.toFixed(0)+" m/s",48,c-2);a.textAlign="right";a.ft("\u6d4b\u8bd5\u65f6\u95f4\uff1a"+k.st,46+d-2,c-2);a.re();a.sa();a.t(46,c);k=F(f/2)+.5;a.lineWidth=1;a.strokeStyle="#888";a.ddl(0,k,d,k,[2,1]);a.bp();a.r(.5,.5,d-1,f-1);a.s();z=F(.3*c);a.fillStyle="#444";a.textAlign="right";a.textBaseline="bottom";a.font=.7*c+"px Calibri";q=t?h*p/1E3:h*p*g/2E6;q=100<=q?10:50<=q?5:20<=q?2:1;D=t?1E3*q*x/h:1E6*q*x/h/g;if(t)for(a.ft("T (ms)",d-4,f-z),a.textAlign="center",a.bp(),q=0,r=A;r<d-3*c;q++,r=A+F(D*q))a.m(r,f-z-1),a.l(r,f-1),a.ft(((r-A)*h/x/1E3).toFixed(0),r,f-z);else for(a.ft("L (m)",d-4,f-z),a.textAlign="center",a.bp(),q=0,r=A;r<d-3*c;q++,r=A+F(D*q))a.m(r,.1>q%2?f-z-1:f-z/2-1.5),a.l(r,f-1),.1>q%2&&a.ft(((r-A)*h*g/x/2E6).toFixed(0),r,f-z);a.s();a.lineWidth=2;a.dcH(k,l,p,x,G,"#0000FF");p=F(c/2)-1;a.lineWidth=1;a.strokeStyle="#FFA500";a.fillStyle="#FF6347";a.textAlign="left";a.textBaseline="top";a.font=.8*c+"px Calibri";b.defects=[];for(q=0;q<w.length;q++)k=F((2E6*w[q]/h/g+u)*x)+.5,b.defects[q]=k+46-.5,a.ddl(k,1,k,f+p,[5,3]),a.fillText(w[q].toFixed(1)+" m",k+6,4);a.strokeStyle="#00A000";1!=b.mode&&a.ddl(A,1,A,f+p,[5,3]);2!=b.mode&&a.ddl(e,1,e,f+p,[5,3]);a.fillStyle="#6060D4";a.fr(A-.5,f+p,e-A+1,p);a.fillStyle="#222";a.textBaseline="bottom";a.ft(m.toFixed(2)+" m",e+12,f+.9*c);!this.isShowSource&&(.1<this.filter&&(a.textAlign="left",a.ft("     LF : "+this.filter.toFixed(0)+" Hz",d-5.4*c,f-3.2*c)),.01<this.amp&&this.ampIndex>u||4==b.mode)&&(a.textAlign="left",a.ft("AMP : "+this.amp.toFixed(1),d-5.4*c,f-2*c));for(;0<this.cursorX;){m=this.cursorX-46;if(1==b.mode||2==b.mode){a.ddl(m+.5,1,m+.5,f+p,[5,3]);break}if(0==b.mode&&this.isEditEnable&&(4>I(m-A)||4>I(m-e)))break;if(3==b.mode){for(q=0;q<b.defects.length;q++)if(3>I(b.defects[q]-46-m)){a.drawImage(fa,m-9,2*c);m=-1;break}if(0>m)break}a.lineWidth=1;a.strokeStyle="#F00";a.bp();a.m(m+.5,1);a.l(m+.5,f-1);a.s();a.textAlign="left";a.textBaseline="top";a.fillStyle="#F00";u=m+.5-A;t?a.ft((u*h/x/1E3).toFixed(2)+" ms",m+6,1.2*c):a.ft((u*g*h/x/2E6).toFixed(2)+" m",m+6,1.2*c);this.isEditEnable&&(a.fillStyle="#00F",4==b.mode?m>A+1&&m<e-1&&a.drawImage(da,m+4,2*c):3==b.mode&&m<=e-4&&m>=A+4&&a.drawImage(ea,m+4,2*c));break}t&&(a.fillStyle="#F00",a.textBaseline="top",a.textAlign="right",a.font=1.2*c+"px \u5b8b\u4f53",a.ft("\u9524\u51fb\u529b\u4fe1\u53f7",d-8,c+4));a.re();b.hotArea=[];b.hotArea[0]=[56,c+8,c+50,c+35];b.hotArea[1]=[47,c+1,d+46-2,f+c-1]};L.prototype.drawH=function(b){if(this.zv!==E){var a=Math.round,d=b.width,c=a(25*d/1024),f=b.height-c,k=this.zv.length,h=d/k,l=0<this.zMax?.21*f/this.zMax:0,p=0<this.vMax?.21*f/this.vMax:0,t=0<this.eMax?.21*f/this.eMax:0,m=this.ch[0].si,g=a(Z(this.zv,this.zvMax)*h)+.5,u=a(this.pl*h*2E6/this.pv/m)+g,e=b.ctx;X(e,b.width,b.height,8,c-4);e.sa();e.fillStyle="#222";e.textBaseline="bottom";e.font=.8*c+"px Calibri";e.textAlign="left";e.ft("\u6869\u53f7\uff1a"+this.pn+"    \u6869\u5f84\uff1a"+this.pd+"    \u6869\u957f\uff1a"+this.pl.toFixed(2)+" m    \u6ce2\u901f\uff1a"+a(this.pv)+" m/s",2,c-2);e.textAlign="right";e.ft("\u6d4b\u8bd5\u65f6\u95f4\uff1a"+this.ch[0].st,d-2,c-2);e.re();e.sa();e.t(0,c);var w=a(f/2)+.5,x=a(w-f/4)-.5,G=a(w+f/4)+.5;e.lineWidth=1;e.strokeStyle="#888";e.ddl(0,w,d,w);e.ddl(0,x,d,x,[2,1]);e.ddl(0,G,d,G,[2,1]);e.bp();e.r(.5,.5,d-1,f-1);e.s();var A=a(.3*c);e.fillStyle="#444";e.textBaseline="bottom";e.font=.7*c+"px Calibri";e.textAlign="right";e.ft("T (ms)",d-4,w-A);var z=m*k/1E3,q=1E3*(100<=z?10:50<=z?5:20<=z?2:1)*h/m;e.textAlign="center";e.bp();for(var z=0,D=g;D<d-3*c;z++,D=g+a(q*z))e.m(D,w-A-.5),e.l(D,w-.5),e.m(D,f-A-1),e.l(D,f-1),e.ft(((D-g)*m/h/1E3).toFixed(0),D,w-A);e.s();e.lineWidth=2;e.textAlign="left";e.textBaseline="middle";e.font=.6*c+"px Calibri";var A=d-120*h,z=1.2*c,q=d-e.measureText("WWW8 \x3d 88888 m/s").width-8,D=w-3.5*c,r=[8,4];0==b.curveType?(e.dcH(x,this.zv,k,h,l,"#B8860B",r),e.dcH(x,this.f,k,h,l,"#00F"),e.dcs(A,z,h,"Z \u00b7 V","#B8860B",r),e.dcs(A,z+c,h,"F","#00F"),e.dcH(G,this.wd,k,h,l,"#B8860B",r),e.dcH(G,this.wu,k,h,l,"#00F"),e.dcs(A,w+z,h,"Wd","#B8860B",r),e.dcs(A,w+z+c,h,"Wu","#00F"),e.fillStyle="#000000",e.ft("ZVX \x3d "+this.zvMax.toFixed(0)+" kN",q,D),e.ft("FMX \x3d "+this.fMax.toFixed(0)+" kN",q,D+c),e.ft("WDX \x3d "+this.wdMax.toFixed(0)+" kN",q,w+D),e.ft("WUX \x3d "+this.wuMax.toFixed(0)+" kN",q,w+D+c)):(e.dcH(x,this.v[0],k,h,p,"#B8860B"),e.dcH(x,this.v[1],k,h,p,"#00F"),e.dcs(A,z,h,"V1","#B8860B"),e.dcs(A,z+c,h,"V2","#00F"),e.dcH(G,this.e[0],k,h,t,"#B8860B"),e.dcH(G,this.e[1],k,h,t,"#00F"),e.dcs(A,w+z,h,"\u03b51","#B8860B"),e.dcs(A,w+z+c,h,"\u03b52","#00F"),e.fillStyle="#000000",e.ft("VMX1 \x3d "+this.v1Max.toFixed(2)+" m/s",q,D),e.ft("VMX2 \x3d "+this.v2Max.toFixed(2)+" m/s",q,D+c),e.ft("EMX1 \x3d "+this.e1Max.toFixed(0)+" uE",q,w+D),e.ft("EMX2 \x3d "+this.e2Max.toFixed(0)+" uE",q,w+D+c));e.strokeStyle="#00A000";e.lineWidth=1;e.ddl(g,1,g,w-1,[5,3]);e.ddl(u,1,u,w-1,[5,3]);l=a(w-2*c);e.fillStyle="#6060D4";e.fr(g-.5,l,u-g+1,a(c/2)-1);e.fillStyle="#222";e.ft("L \x3d "+this.pl.toFixed(2)+" m",u+8,l+.2*c);0<this.cursorX&&(u=this.cursorX,e.lineWidth=1,e.strokeStyle="#F00",e.bp(),e.m(u+.5,1),e.l(u+.5,f-1),e.s(),e.textAlign="left",e.textBaseline="top",e.fillStyle="#F00",e.font=.8*c+"px Calibri",g=u+.5-g,0<=g&&e.ft("T \x3d "+(g*m/h/1E3).toFixed(2)+" ms",u+6,w-3*c),z=a(u/h),0==b.curveType?z<k&&(e.ft("ZV \x3d "+this.zv[z].toFixed(0),u+8,.2*c),e.ft("F \x3d "+this.f[z].toFixed(0),u+8,1.2*c),e.ft("Wd \x3d "+this.wd[z].toFixed(0),u+8,w+.2*c),e.ft("Wu \x3d "+this.wu[z].toFixed(0),u+8,w+1.2*c)):z<k&&(e.ft("V1 \x3d "+this.v[0][z].toFixed(2),u+8,.2*c),e.ft("V2 \x3d "+this.v[1][z].toFixed(2),u+8,1.2*c),e.ft("\u03b51 \x3d "+this.e[0][z].toFixed(0),u+8,w+.2*c),e.ft("\u03b52 \x3d "+this.e[1][z].toFixed(0),u+8,w+1.2*c)));e.re();b.hotArea=[];b.hotArea[0]=[8,c+2,52,c+34];b.hotArea[1]=[1,c+1,d-1,f+c-1]}};L.prototype.onmouseout=function(b){if(0<this.cursorX)if(this.cursorX=-1,this.isHS)this.drawH(b);else{if(1==b.mode||2==b.mode)b.mode=0;b.style.cursor="default";this.drawL(b)}};L.prototype.onmousemove=function(b,a){var d=V(a.x,a.y,b.hotArea);b.title=0==d?"\u6b66\u6c49\u5ca9\u6d77\u516c\u53f8\u7248\u6743\u6240\u6709":"";if(0<d)this.cursorX=a.x,this.isHS?this.drawH(b):(1==b.mode||2==b.mode?b.style.cursor="col-resize":0==b.mode&&this.isEditEnable?4>I(a.x-b.head)||4>I(a.x-b.tail)?b.style.cursor="col-resize":b.style.cursor="default":b.style.cursor="default",this.drawL(b));else this.onmouseout(b)};L.prototype.onmousedown=function(b,a){var d=b.defects,c=a.x,f,k;if(this.isEditEnable&&1==V(c,a.y,b.hotArea))if(this.cursorX=c,0==b.mode)4>I(c-b.head)?b.mode=1:4>I(c-b.tail)&&(b.mode=2);else if(4==b.mode)b.mode=0,d=document.getElementById(b.id+"_rs_amp"),d.checked=!1,d.style.backgroundColor="",this.drawL(b);else if(3==b.mode&&!(c>b.tail-4||c<b.head+4)){for(f=0;f<d.length;f++){if(3>I(d[f]-c)){c=[];for(k=0;k<f;k++)c[k]=this.defects[k];for(k=f+1;k<d.length;k++)c[k-1]=this.defects[k];this.defects=c;this.drawL(b);return}if(15>I(d[f]-c)){this.defects[f]=(c-b.head)*this.real_pl/(b.tail-b.head);this.drawL(b);return}}3<=this.defects.length?this.defects=[]:this.defects[this.defects.length]=(c-b.head)*this.real_pl/(b.tail-b.head);this.drawL(b)}};L.prototype.onmouseup=function(b,a){var d=a.x;this.isEditEnable&&(1==b.mode?(d<b.tail-50&&(this.calcByPv?this.real_pl=(b.tail-d)*this.real_pl/(b.tail-b.head):this.real_pv=(b.tail-b.head)*this.real_pv/(b.tail-d),this.headIndex=(d-46)/b.ratioX),b.mode=0,this.drawL(b)):2==b.mode&&(d>b.head+50&&(this.calcByPv?this.real_pl=(d-b.head)*this.real_pl/(b.tail-b.head):this.real_pv=(b.tail-b.head)*this.real_pv/(d-b.head)),b.mode=0,this.drawL(b)))};L.prototype.onmousewheel=function(b,a,d){var c=a.x;1!=V(c,a.y,b.hotArea)||c<b.head+1||c>b.tail-1||(this.ampIndex=F((c-46)/b.ratioX),this.amp+=0<d?.1:-.1,5<this.amp?this.amp=5:.01>this.amp&&(this.amp=0),this.drawL(b))};L.prototype.drawCurve=function(b,a){var d=Y(b,this.isEditEnable?ia:E),c;d.data=this;a!==E&&(d.curveType=a);d.curveType===E&&(d.curveType=0);if(this.isHS)this.drawH(d);else{d.mode=0;d.defects=[];if(c=document.getElementById(d.id+"_rs_filter"))c.checked=.1<this.filter,c.style.backgroundColor=c.checked?"#4CD964":"";if(c=document.getElementById(d.id+"_rs_pl"))c.checked=!this.calcByPv,c.style.backgroundColor=c.checked?"#4CD964":"";if(c=document.getElementById(d.id+"_rs_pv"))c.checked=this.calcByPv,c.style.backgroundColor=c.checked?"#4CD964":"";this.drawL(d)}d.onmousemove=function(a){var b=S(this);a=R(a);a.x-=b.x;a.y-=b.y;this.data.onmousemove(this,a)};d.onmouseout=function(){this.data.onmouseout(this)};d.onmousedown=function(a){var b;this.data.isHS||(this.dlgId!==E&&(document.getElementById(this.dlgId).style.display="none"),b=S(this),a=R(a),a.x-=b.x,a.y-=b.y,this.data.onmousedown(this,a))};d.onmouseup=function(a){var b;this.data.isHS||(b=S(this),a=R(a),a.x-=b.x,a.y-=b.y,this.data.onmouseup(this,a))};d.onmousewheel=d.onwheel=function(a){var b,c,d;!this.data.isHS&&this.data.isEditEnable&&4==this.mode&&(b=Q(-1,ka(1,a.wheelDelta||-a.deltaY)),c=S(this),d=R(a),d.x-=c.x,d.y-=c.y,a.preventDefault(),this.data.onmousewheel(this,d,b))}};T.prototype.redraw=function(b){var a=b.curveType,d=this.source,c=this.Vc,f=Math.round,k=b.width/300,h=f(50*k),l=f(92*k),p=b.width-h-f(4*k),k=b.height-l-f(8*k),t=f(4*p/9),m=f(p/9),g=p-t-m,u=d.Section[a],e=u.WaveVelocity,w=u.PeakValue,x=u.Depth,G=u.Psd,A=x[x.length-1],z=k/A,q=10*f((u.Ac-15)/10),D=q+30,r,d=p/280,n=b.ctx;X(n,b.width,b.height,2,-4,h/15);n.sa();n.fillStyle="#F4F4F4";n.fr(h,l,t,k);n.fr(h+t+m,l,g,k);n.lineCap="round";n.lineJoin="round";n.t(h,l);n.lineWidth=1;n.strokeStyle="#000";n.bp();n.r(.5,.5,p-1,k);for(var v=0;v<=A;v+=500)r=0==v%2E3?-6:-4,a=.5+f(v*z),n.m(r,a),n.l(.5,a);for(v=q;v<=D;v+=10)r=f((v-q)*t/(D-q))+.5,n.m(r,-6),n.l(r,0);for(v=2;6>=v;v+=1)r=f((v-2)*g/4)+t+m-.5,n.m(r,-6),n.l(r,0);n.s();n.fillStyle="#000";n.textAlign="right";n.textBaseline="middle";n.font=15*d+"px Calibri";for(v=0;v<=A;v+=2E3)a=.5+f(v*z),n.ft((v/1E3).toFixed(0)+"m",-8,a);n.textBaseline="bottom";n.fillStyle="#080";n.textAlign="left";n.fillText("A (db)",-4,-6-18*d);n.textAlign="center";for(v=q;v<=D;v+=10)r=f((v-q)*t/(D-q))+.5,n.ft(v.toFixed(0)+"",r,-6);n.fillStyle="#00F";n.textAlign="right";n.fillText("v (km/s)",p+2,-6-18*d);n.textAlign="center";for(v=2;6>=v;v+=1)r=f((v-2)*g/4)+t+m-.5,n.ft(v.toFixed(0)+"",r,-6);n.fillStyle="#444";n.textAlign="center";n.fillText("PSD",t+m/2,-6-18*d);n.fillStyle="#000";n.font=16*d+"px Calibri";n.textAlign="left";n.textBaseline="top";v="\u5256\u9762\uff1a"+u.SectionName;n.ft(v,16,2-l);v=isNaN(c)||6<c||2>c?"Ac \x3d "+u.Ac.toFixed(1)+" db      vc \x3d ---":"Ac \x3d "+u.Ac.toFixed(1)+" db      vc \x3d "+c.toFixed(3)+" km/s";n.ft(v,16,2+22*d-l);n.lineWidth=1;n.strokeStyle="#080";r=f((u.Ac-q)*t/(D-q))+.5;1<r&&r<t&&n.ddl(r,1,r,k,[5,3]);n.lineWidth=2;n.bp();r=(w[0]-q)*t/(D-q);r=O(r,2,t-1);n.m(r,1);for(v=1;v<w.length;v++)r=(w[v]-q)*t/(D-q),r=O(r,2,t-1),n.l(r,x[v]*z);n.s();n.t(t,0);n.lineWidth=1;n.strokeStyle="#888";n.bp();r=8+G[0]*(m+g)/100;r=O(r,8,m+g-2);n.m(r,1);for(v=1;v<e.length;v++)r=8+G[v]*(m+g)/100,r=O(r,8,m+g-2),n.l(r,x[v]*z);n.s();n.t(m,0);n.lineWidth=1;n.strokeStyle="#00F";r=f((this.Vc-2)*g/4)+.5;1<r&&r<g&&n.ddl(r,1,r,k,[5,3]);n.lineWidth=2;n.bp();r=(e[0]-2)*g/4;r=O(r,1,g-2);n.m(r,1);for(v=1;v<e.length;v++)r=(e[v]-2)*g/4,r=O(r,1,g-2),n.l(r,x[v]*z);n.s();n.re();n.sa();n.t(h,l);a=this.cY-l;if(0<a){n.lineWidth=1;n.strokeStyle="#F00";n.ddl(.5,a+.5,p-.5,a+.5,[2,2]);c=a*A/(1E3*k);for(v=x.length-1;0<=v&&!(1E3*c>=x[v]);v--);t=(e[v+1]-e[v])*(1E3*c-x[v])/(x[v+1]-x[v])+e[v];m=(w[v+1]-w[v])*(1E3*c-x[v])/(x[v+1]-x[v])+w[v];v=isNaN(t)||6<t?"z\x3d"+c.toFixed(2)+"m  A\x3d"+m.toFixed(1)+"db  v\x3e6km/s":"z\x3d"+c.toFixed(2)+"m  A\x3d"+m.toFixed(1)+"db  v\x3d"+t.toFixed(1)+"km/s";n.globalAlpha=.8;n.fillStyle="#FFF";a>30*d?n.fr(1,a-20,p-2,20):n.fr(1,a+1,p-2,20);n.globalAlpha=1;n.font=19*d+"px Calibri";n.textAlign="left";n.textBaseline=a>30*d?"bottom":"top";n.fillStyle="#F00";n.ft(v,4,a)}n.re();b.hotArea=[];b.hotArea[0]=[0,0,h,f(2*(h-5)/3)+8];b.hotArea[1]=[h+1,l+1,p+h-1,k+l-1]};T.prototype.onmouseout=function(b){0<this.cY&&(this.cY=-1,this.redraw(b))};T.prototype.onmousemove=function(b,a){var d=V(a.x,a.y,b.hotArea);b.title=0==d?"\u6b66\u6c49\u5ca9\u6d77\u516c\u53f8\u7248\u6743\u6240\u6709":"";if(0<d)this.cY=a.y,this.redraw(b);else this.onmouseout(b)};T.prototype.drawCurve=function(b,a){var d=Y(b);d.data=this;a!==E&&(d.curveType=a);this.redraw(d);d.onmousemove=function(a){var b=S(this);a=R(a);a.x-=b.x;a.y-=b.y;this.data.onmousemove(this,a)};d.onmouseout=function(){this.data.onmouseout(this)}};var la=function(b,a,d,c){function f(a,b){if(null==a||null==b||0==a.length||a.length!=b.length)return null;for(var c=0;c<a.length;c++)if(null==a[c]||a[c].length!=a.length)return null;var d=a.length-1,g=Array(a.length);if(0==d)return g[0]=b[0]/a[0][0],g;for(var m=Array(d),h=Array(d),k=-1,l=-1,c=0;c<=d;c++){for(var q=0;q<=d;q++)if(0!=a[c][q]){l=q;break}if(-1!=l){k=c;break}}if(-1==k)return null;for(var p=0,c=0;c<=d;c++)if(c!=k){h[p]=b[c]*a[k][l]-b[k]*a[c][l];m[p]=Array(d);for(var r=0,q=0;q<=d;q++)q!=l&&(m[p][r]=a[c][q]*a[k][l]-a[k][q]*a[c][l],r++);p++}m=f(m,h);h=b[k];for(c=p=0;c<=d;c++)c!=l&&(h-=a[k][c]*m[p],g[c]=m[p],p++);g[l]=h/a[k][l];return g}function k(a){if(null==p)return 0;for(var b=0,c=0;c<p.length;c++)b+=Math.pow(a,c)*p[c];return b}function h(a){return h(a,1)}function h(a,b){if(null==p)return-1;var c,d=b,f=0;do{var d=c=d,g=k(c)-a,h;if(null==p)h=0;else{h=0;for(var m=1;m<p.length;m++)h+=m*Math.pow(c,m-1)*p[m]}d-=g/h;f++}while(1E-7<Math.abs(c-d)&&20>f);return 20<=f?-1:isNaN(d)||!isFinite(d)?-1:d}if(null==b||null==a||2>b.length||b.length!=a.length)throw"IllegalArgumentException occurred.";for(var l=Array(b.length),p=[],t=0;t<b.length;t++)l[t]=1;c&&(l[0]=1E6);(function(){if(!(null==b||null==a||1>=b.length||b.length!=a.length||b.length<d||2>d)){for(var c=Array(2*(d-1)+1),g=0;g<c.length;g++)c[g]=0;for(g=0;g<c.length;g++)for(var h=0;h<b.length;h++)c[g]+=Math.pow(b[h],g)*l[h];for(var e=Array(d),g=0;g<e.length;g++)e[g]=0;for(g=0;g<e.length;g++)for(h=0;h<b.length;h++)e[g]+=Math.pow(b[h],g)*a[h]*l[h];h=Array(d);for(g=0;g<d;g++)h[g]=c.slice(g,g+d);p=f(h,e)}})();c={};c.coefficient=p;c.fit=function(a){return k(a)};c.fit3=function(a){return null==p||3!=p.length?0:p[2]*a*a+p[1]*a};c.solve=function(a,b){return h(a,b)};return c},ma=function(b){function a(a){var b=Math.round,c=a.width-60-20,d=a.height-60-20,p=K(k),x=K(h),r=(k[1]-k[0])/10,n=f;p<x&&(n=parseInt(x/(10*r))+1,8<n&&(r=r*n/8,n=8));n=5>n?5:n;x=10*n;p=r*x;300>c&&4<n&&(x=40,r=p/x);t=2>t?2:Math.ceil(t);var n=10*(300<d?8:4),v=t/n,E=c/p,F=d/t,y=a.ctx;X(y,a.width,a.height,2,-4,4);var B,H;a=420<=c?1:c/420;y.t(62,65);y.bp();y.fillStyle="#000";y.font=20*a+"px Calibri";y.textAlign="center";y.textBaseline="middle";B="\u03c3s \x3d "+(0==w?"--":w)+" MPa";y.ft(B,c/4-10,-38);y.textAlign="center";B="K30 \x3d "+(0>e?"--":e)+" MPa/m";y.ft(B,c/4*3-10,-38);y.cp();y.s();y.sa();y.fillStyle="#FFFFFF";y.fr(0,0,c,d);y.lineCap="round";y.lineJoin="round";y.lineWidth=1;y.strokeStyle="#000";y.bp();y.r(.5,.5,c,d);for(var C=0;C<=n;C++)B=0==C%5?-6:-4,H=b(C*v*F)+.5,y.m(B,H),y.l(.5,H);for(C=0;C<=x;C++)B=b(C*r*E)+.5,H=0==C%5?-6:-4,y.m(B,H),y.l(B,0);y.cp();y.s();y.sa();y.textBaseline="middle";y.font=14*a+"px Calibri";y.fillStyle="#000";y.textAlign="left";y.ft("S(mm)",4,d-10);y.textAlign="right";y.ft("\u03c3s(MPa)",c-2,10);y.fillStyle="#000";y.textAlign="right";for(C=0;C<=n;C+=10)H=b(C*v*F),0===C?y.ft("0",-8,H):y.ft((C*v).toFixed(2),-9,H);y.fillStyle="#000";y.textAlign="center";for(C=0;C<=x;C+=10)B=b(C*r*E),0===C?y.ft(0,B,-12):y.ft((C*r).toFixed(2),B,-12);y.s();y.sa();y.fillStyle="#215e21";y.strokeStyle="#215e21";for(C=0;C<l.length;C++)H=b(l[C]*F),B=b(h[C]*E),0>B||B>c||0>H||H>d||(y.bp(),y.a(B,H,4,0,2*Math.MATH_PI),y.f());y.sa();y.fillStyle="#008800";y.strokeStyle="#008800";y.lineWidth=2;y.bp();for(C=H=B=0;C<10*x;C++){y.m(B,H);B=r/10*C;if(B>p)break;H=3==m?g*B*B+u*B:g*B+u;if(H>t)break;B=b(B*E);H=b(H*F);0>B||0>H||y.l(B,H)}y.cp();y.s();y.sa();y.lineWidth=1;y.strokeStyle="#008800";y.fillStyle="#008800";H=b(1.25*F)+.5;0<w&&(B=b(w*E)+.5,B<=c&&y.ddl(B,1,B,d,[5,3]));y.ddl(1,H,c,H,[5,3])}for(var d={},c=b.K3SummaryData,f=c.length,k=Array(f),h=Array(f),l=Array(f),p=0;p<f;p++)k[p]=c[p].Press.toFixed(2),h[p]=c[p].RealPress.toFixed(7),l[p]=c[p].SAverage.toFixed(2);var t=K(l),m=1.25>=t?2:3,c=new la(h,l,m,!0),g=c.coefficient[m-1],u=c.coefficient[m-2],e=b.KdjReal,w=0;0!=e?(w=0>e?0:.00125*e,w=0==w?0:w.toFixed(2)):(w=c.solve(1.25,1E-4),0>w&&(w=c.solve(1.25,t)),e=0>w?0:(w/.00125).toFixed(3),w=w.toFixed(2));d.k=e;d.sigma=w;d.redraw=function(b){a(b)};d.drawCurve=function(c){c=Y(c);c.data=b;a(c)};return d};U.$RS=U._rs={calcData:function(b){b="string"===typeof b?eval("("+b+")"):b;if("[object Array]"===Object.prototype.toString.call(b)){if(b[0].SignalType!==E)return new L(b)}else{if(b.SectionCount!==E)return new T(b);if(b.K3SummaryData!==E)return new ma(b)}return null}}}})(window);