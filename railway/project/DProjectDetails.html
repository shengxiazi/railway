<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <LINK rel="Bookmark" href="/favicon.ico" >
    <LINK rel="Shortcut Icon" href="/favicon.ico" />

    <link rel="stylesheet" type="text/css" href="../static/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/H-ui.admin.css" />
    <link rel="stylesheet" type="text/css" href="../lib/Hui-iconfont/1.0.7/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="../static/h-ui.admin/skin/default/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/style.css" />
    <!--/meta 作为公共模版分离出去-->
    <style>
        .input-text:hover, .textarea:hover {
            border: solid 0px #fff;
        }
        .table th{
            font-size:14px;
            width:117px;
            text-align: right;
            background-color: #f8f8f8;
        }
        .table td{
            padding:4px;
            height:25px;
            font-size:14px;
            text-align:left;
            padding-left:20px;
        }

        .table .text-c  td{

            padding-left:0px;
        }


    </style>
    <title>地基处理桩</title>
</head>
<body>
<div id="tab-system" class="HuiTab" style="margin:0 10px">
    <div class="tabBar cl"><span>项目详情</span><span>操作日志</span></div>
    <div class="tabCon">
        <article class="page-container" >
            <table class="table table-border table-bordered">
                <tr>
                    <th><span class="c-red">*</span>所属项目：</th>
                    <td colspan="5" id="xmName">
                    </td>
                </tr> 
                <tr class="text-c">
                	<!--<th colspan="4"><span class="text" id='xmName'></span><span class="text">项目-工程基本信息</span></th>-->
                    <th colspan="6"><span class="text">工程基本信息</span></th>
                </tr>
                <tr>
                    <th><span class="c-red">*</span>工程名称:</th>
                    <td colspan="5" id="projectName">
                    </td>
                </tr>
                <tr>
                    <th><span class="c-red">*</span>工程地址:</th>
                    <td colspan="5" id="address">
                    </td>
                </tr>
                <tr>
                	<th><span class="c-red">*</span>起始里程(m):</th>
                	<td id="lc">
                
                	</td>
                	<th><span class="c-red">*</span>截止里程(m):</th>
                	<td id="endlc">
                
                	</td>
                	<th width="100px"><span class="c-red">*</span>工程备用位:</th>
                	<td id="bywCode">
                
                	</td>
                </tr>
                <tr>
                	<th width="100px"><span class="c-red">*</span>桩型:</th>
                	<td id="pileType">
                		 
                	</td>
                	<th width="100px"><span class="c-red">*</span>布置形式:</th>
                	<td id="bzxs">
                		 
                	</td>
                	<th><span class="c-red">*</span>总桩数:</th>
                	<td  id="total" >
                		 
                	</td>
                
                </tr>
                
                <tr>
                	<th width="100px"><span class="c-red">*</span>桩长(m):</th>
                	<td id="pileLength" >
                		 
                	</td>
                	<th width="100px"><span class="c-red">*</span>桩径(mm):</th>
                	<td id="pileDiameter" >
                		 
                	</td>
                	<th width="100px"><span class="c-red">*</span>桩间距(mm):</th>
                	<td id="pileSpacing">
                		 
                	</td>
                
                </tr>
                <tr>
                    <th width="100px"><span class="c-red">*</span>里程标识：</th>
                    <td  id="lcFlag">

                    </td>
                    <th>图纸编号：</th>
                    <td id="drawNo" colspan="3">

                    </td>
                </tr>
                <tr class="text-c">
                    <th colspan="6"><span class="text">参建单位信息</span></th>
                </tr> 
                <tr>
                	<th><span class="c-red">*</span>建设标：</th>
                	<td id="jsbCode">
                
                	</td>
                	<th><span class="c-red">*</span>施工标：</th>
                	<td id="sgbCode">
                
                	</td>
                	<th><span class="c-red">*</span>监理标：</th>
                	<td id="jlbCode">
                
                	</td>
                
                </tr>
                <tr>
                	<th><span class="c-red">*</span>检测标：</th>
                	<td id="jcbCode">
                
                	</td>
                	<th>监督标：</th>
                	<td id="jdbCode">
                
                	</td>
                
                	<th>设计标：</th>
                	<td id="sjbCode">
                
                	</td>
                </tr>
                <tr>
                
                	<th>咨询标：</th>
                	<td id="zxbCode">
                
                	</td>
                	<td colspan="4">
                
                	</td>
                </tr>
            </table>
            <table class="table table-border table-bordered" style="border-top:0" id="testData">
                <tr class="text-c">
                    <th colspan="6">检测数量</th>
                </tr>
                <tr class="text-c">
                    <th>检测项目</th>
                    <th>检测数量（根）</th>
                    <th>检测项目</th>
                    <th>检测数量（根）</th>
                     <th>检测项目</th>
                    <th>检测数量（根）</th>
                </tr>
            </table>
            <table class="table table-border table-bordered" style="border-top:0">
                <tr>
                    <th width="60px" class="text-c">备注</th>
                    <td colspan="3" id="remark">
                    </td>
                </tr>
                <tr>
                    <th width="80px" >创建人：</th>
                    <td id="createName"></td>
                    <th width="80px">创建时间：</th>
                    <td id="createTime"></td>
                </tr>

            </table>
        </article>
    </div>
    <div class="tabCon">
        <div class="cl pd-5 bg-1 bk-gray mt-20">
            <span class="l"></span><span class="r">共有数据：<strong class="data-total"></strong> 条</span>
        </div>
        <div class="mt-20">
            <table class="table table-border table-bordered table-hover table-bg table-sort">
                <thead>
                <tr class="text-c">
                    <th width="100">模块名称</th>
                    <th width="200">操作内容</th>
                    <th width="100">操作人</th>
                    <th width="50">操作时间</th>
                    <th width="70">操作详情</th>
                </tr>
                </thead>
                <tbody id="logInfo">
                </tbody>
            </table>
        </div>
    </div>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="../lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../lib/layer/2.1/layer.js"></script>
<script type="text/javascript" src="../static/h-ui/js/H-ui.js"></script>
<script type="text/javascript" src="../static/h-ui.admin/js/H-ui.admin.js"></script>
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript">
    var id = sessionStorage.dlistprojectId;
    var xmlist = JSON.parse(sessionStorage.d_xmlist);
    $(function(){
        $.Huitab("#tab-system .tabBar span","#tab-system .tabCon","current","click","0");
 
        //获取信息
        $.ajax({
            url: "/api/v1/DProject/"+id,    //请求的url地址
            dataType: "json",
            async: false,
            type: "GET",
            success: function(reg) {
                if(reg.code==0){
                	debugger;
                    var xm_id = reg.data.xmId.toUpperCase();
                    $('#xmId').val(xm_id);
                   
                    proInfo(xm_id);
                    for (var Key in reg.data){
                        var value=reg.data[Key];
                        if(value==null|| value=="null"){

                            value="";
                        }
                        
                        $('#'+Key).text(value);
                    } 
                    $('#remark').val(reg.data.remark);
                    $('#bywCode').val(reg.data.bywCode);
                }else{
                    layer.alert(reg.message);
                }
            },error:function(e){
            	layer.alert('请求出错！'); 
            }
        });

        //操作日志
        var url= '/api/v1/DProject/'+id+'/OperationLog';
        opertionLog(url)

    });

    function proInfo(xmId){
        $.ajax({
            url:"/api/v1/XMProject/"+xmId+'/ByBdAndQuote?buildTypeCode=D',    //请求的url地址
            dataType: "json",
            async: false,
            type: "GET",
            success: function(reg) {
                if(reg.code==0){
                    var str="";
                    var zxstr="";
                    var qutaData = reg.data.testList;
                    $.each(qutaData,function(key,val) {
                            if (key % 3 == 0)
                                str += '<tr class="text-c add">';
                            switch (val.testModeCode) {

                                case "DY":
                                    str += '<th>低应变</th>';
                                    str+='<td id="dy"></td>';

                                    break;
                                case "DZ":
                                    str += '<th>单桩静载</th>';
                                    str+='<td id="dz"></td>';
                                    break;
                                case "FH":
                                    str += '<th>复合地基</th>';
                                    str+='<td id="fh"></td>';

                                    break;
                                
                                case "ZX":
                                    str += '<th>钻芯</th>';
                                    str+='<td id="zx"></td>';
                                    break; 
                                default:
                                    break;
                            }

                            if (key % 3== 2&&key>=3) {
                                str += '</tr>';
                            }
                            if (val.testModeCode=="ZX"){

                                zxstr += '<th>钻芯延米(m)</th>';
                                zxstr +='<td id="zxExt"></td>';

                             }


                        });


                    if(qutaData.length%3==2){
	                        if(zxstr!=""){
	                            str+=zxstr;
	                            str += '</tr>';
	                        }else { 
	                            str+='<th>&nbsp;</th>';
	                            str+='<td>&nbsp;</td>';
	                            str+='</tr>';
	                        }

                   		} 
                    	if(qutaData.length%3==1){
	                        if(zxstr!=""){
	                            str+=zxstr;
	                            str+='<th>&nbsp;</th>';
	                            str+='<td>&nbsp;</td>';
	                            str += '</tr>';
	                        }else { 
	                        	str+='<th>&nbsp;</th>';
	                            str+='<td>&nbsp;</td>';
	                            str+='<th>&nbsp;</th>';
	                            str+='<td>&nbsp;</td>';
	                            str+='</tr>';
	                        }

                    	}
	                    if(qutaData.length%3==0){
	                        if(zxstr!="") {
	                            str += '<tr class="text-c add">';
	                            str += zxstr;
	                            str += '<th>&nbsp;</th>';
	                            str += '<td>&nbsp;</td>';
	                            str += '<th>&nbsp;</th>';
	                            str += '<td>&nbsp;</td>';
	                            str += '</tr>';
	                        }
	                    }

                    $('#testData tr:gt(1)').remove();
                    $('#testData').append(str);

                }
            }
        });
    }




</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>